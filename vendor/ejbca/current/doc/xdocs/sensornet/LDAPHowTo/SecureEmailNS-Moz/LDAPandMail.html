<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-15"
 http-equiv="content-type">
  <title>How to use LDAP for Encrypted/signed E-mail</title>
  <meta content="James A. Rome" name="author">
</head>
<body>
<h2 style="text-align: center; color: rgb(0, 102, 0);">SensorNet and
Digital Certificates</h2>
<h2 style="text-align: center; color: rgb(0, 102, 0);">Using Secure
Email with Netscape 7.x
and
Mozilla</h2>
<h3 style="color: rgb(0, 0, 153);">We strongly recommend that you use
Netscape 7.x, or (preferably) Mozilla or the Mozilla separate browser
Firefox and mail client Thunderbird to do your browsing and e-mails.
Internet Explorer and Outlook have numerous security problems and are
not very good at handling digital certificates.</h3>
<br>
<ul>
  <li><a
 href="#getcert">Retrieving
Other People's Digital Certificates</a> </li>
  <li><a
 href="#encryption">Encrypting
Email</a> </li>
  <li><a
 href="#signing">Digitally
Signing Email</a> </li>
  <li><a
 href="#both">Encrypting
and Digitally Signing Email </a></li>
</ul>
<a
 href="#both"><br>
</a><a name="getcert"></a>
<b>Retrieving Other People's Digital Certificates
</b>
<table style="text-align: left; margin-left: auto; margin-right: auto;"
 border="0">
  <tbody>
    <tr>
      <td> By now, you probably know that in order to send secure
(specifically, encrypted) email to an individual with a SensorNet
Certificate, you will need their public key (contained within their
digital certificate). How do you get their public key? Well, at
SensorNet, we store people's certificates in our online directory
(LDAP). You can easily retrieve their certificates via the directory
and place them into your computer. Listed below are the steps on how to
do this. </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td> First, we're going to make a new directory in Mozilla Mail's
Address Book. Select "<b>Address Book</b>" from the "<b>Windows</b>"
option in the menubar (see Figure 1.). </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="center"> <img style="width: 809px; height: 523px;"
 alt="Open Address Book" src="OpenAddressBk.png"><br>
      <b>Figure 1.</b> </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td> In the Address Book window, on the top menubar, click on "<b>File</b>",
then "<b>New</b>", and then "<b>LDAP Directory</b>", as shown in Figure
2. </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="center"> <img style="width: 734px; height: 544px;"
 alt="Making a new LDAP Directory entry" src="AddressNewLDAP.png"><br>
      <b>Figure 2.</b> </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td> Type<span style="font-weight: bold;"> SensorNet LDAP</span><b>
Directory Server</b> into the "<b>Name</b>" field, and <b>ldap.</b><span
 style="font-weight: bold;">sensornet.gov</span>
for "<b>Hostname</b>" (as illustrated in Figure 3). It is important to
put in the correct base DN (distinguished name) for the directory: <span
 style="font-weight: bold;">dc=sensornet,dc=gov</span> with no spaces
in it. Also check the Use secure connection (SSL) box and the port
should change to 636.Click on "<b>OK</b>"
when you are finished. Then click <span style="font-weight: bold;">OK</span>
to close the Address Book window. </td>
    </tr>
    <tr align="center">
      <td>&nbsp;<br>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;"> <img
 style="width: 487px; height: 293px;" alt="LDAP Directory properties"
 src="LDAPProps.png"><br>
      <b>Figure 3.</b> </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td> You should now be back at your Mozilla Mail window. Now,
click on "<b>Edit</b>" and then "<b>Preferences</b>". (see Figure 4) </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="center"> <img style="width: 882px; height: 604px;"
 alt="Edit Preferences" src="EditPrefs.png"><br>
      <b>Figure 4.</b> </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td> In the "<b>Preferences</b>" window, choose "<b>Addressing</b>"
underneath "<b>Mail &amp; Newsgroups</b>" in the left pane. On the
right hand side, check the box marked "<b>Directory Server</b>" and
select "<span style="font-weight: bold;">SensorNet</span><b> LDAP</b>"
in the drop-down menu. Click on "<b>OK</b>"
when you are finished. (see Figure 5) </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="center"> <img style="width: 698px; height: 568px;"
 alt="Address preferences" src="AddressPrefs.png"><br>
      <b>Figure 5.</b> </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td> Congratulations! Your Netscape/Mozilla email program is now
set up
to search the SensorNet LDAP directory for people's digital
certificates.
You will see this in action when you go to compose secure email. </td>
    </tr>
  </tbody>
</table>
<b><br>
<a name="alt"></a>
</b>
<table align="center" border="0">
  <tbody>
    <tr>
      <td><big><i>An Alternate Method...</i></big><br>
      <br>
There is also another method of retrieving a person's digital
certificate. Anyone who sends you a digitally signed email will have
their public key automatically added to your list of certificates when
you open their email. You can tell if the email that you've received is
signed by the presence of the "Signed" icon in the upper right-hand
corner of the email. (See Figure 6) </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="center"> <img style="width: 750px; height: 533px;"
 alt="Digitally signed e-mail" src="ns7signed_icon.gif"><br>
      <b>Figure 6.</b> </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td> You can verify the sender's digital signature by clicking on
the "Signed" icon. You'll see a verification window appear which will
state that the message was digitally signed. Also, you will soon see
that the sender's public key has been automatically added to your list
of Other People's Certificates. (see Figure 7) </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="center"> <img style="width: 551px; height: 322px;"
 alt="Security verification" src="ns7verify.gif"><br>
      <b>Figure 7.</b> </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td> From the main Netscape 7 Mail window, click on "<b>Edit</b>"
from the top menu, then select "<b>Preferences</b>", and then look at
the left-hand pane. Select "<b>Privacy &amp; Security</b>", and then "<b>Certificates</b>".
On the right-hand pane, click on the "<b>Manage Certificates</b>"
button. (see Figure 8) </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="center"> <img style="width: 707px; height: 581px;"
 alt="Managing certificates" src="ns7prefcert.gif"><br>
      <b>Figure 8.</b> </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td> In the Certificate Manager window, click on the "<b>Other
People's</b>" tab at the top. You should now see the certificate of the
person who sent you a signed email appear in the "<b>Other People's</b>"
window. This enables you to send the person encrypted email (read below
for more information). (see Figure 9) </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="center"> <img style="width: 513px; height: 437px;"
 alt="Other people's certificates" src="ns7certmanager.gif"><br>
      <b>Figure 9.</b> </td>
    </tr>
  </tbody>
</table>
<b><br>
</b>
<hr><b><br>
<a name="encryption"></a>
Encrypting Email
</b>
<table align="center" border="0">
  <tbody>
    <tr>
      <td> Now that you have your recipient's digital certificate in
your computer, it's very easy to send an encrypted email. Go to compose
an email as you normally would. However, before sending it, click on
the little arrow next to the "<b>Security</b>" button, and select "<b>Encrypt
This Message</b>" from the drop-down menu. (see Figure 10)<br>
      <br>
Then send the email as you normally would. The recipient will then be
able to decrypt the email when s/he receives it by entering the
passphrase to his/her private key when prompted. </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="center"> <img style="width: 687px; height: 510px;"
 alt="Encrypting e-mail" src="ToEncrypt.png"><br>
      <b>Figure 10.</b> </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td> Please note that if you do not have the recipient's digital
certificate in your browser's database, or if their certificate cannot
be retrieved from the LDAP server, you <b>cannot</b> send encrypted
email to them. If you try, you will see an error message (shown in
Figure 10a) which will notify you that you do not have the recipient's
digital certificate. At this point, you may choose to either send the
email un-encrypted, or cancel the message altogether. Please read the
above section entitled "Retrieving Other People's Digital Certificates"
if you wish to send them an encrypted email. </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="center"> <img style="width: 772px; height: 512px;"
 alt="Unable to find certificate message" src="sendFailed.png"><br>
      <b>Figure 10a.</b> </td>
    </tr>
  </tbody>
</table>
<b><br>
</b>
<hr><b><br>
<a name="signing"></a>
Digitally Signing Email
</b>
<table align="center" border="0">
  <tbody>
    <tr>
      <td> Digitally signing email is similar to the procedure outlined
just above for sending encrypting email. The only difference is that
you will have to choose "<b>Digitally Sign This Message</b>" from the "<b>Security</b>"
button drop-down menu before sending your message. (see Figure 11) </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="center"> <img style="width: 690px; height: 510px;"
 alt="Signing mail" src="signMail.png"><br>
      <b>Figure 11.</b> </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td> When you are ready to send your digitally signed email, you
will be prompted to enter the passphrase for the "bag" that holds your
digital certificates
(see Figure 12). You may be asked to enter your passphrase twice. After
you enter it, your email will be sent, digitally signed. </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="center"> <img style="width: 470px; height: 148px;"
 alt="password request" src="password.png"><br>
      <b>Figure 12.</b> </td>
    </tr>
  </tbody>
</table>
<b><br>
</b>
<hr><b><br>
<a name="both"></a>
Encrypting and Digitally Signing Email
</b>
<table align="center" border="0">
  <tbody>
    <tr>
      <td> You can send email that is both encrypted and digitally
signed as well! To do this, you must make sure that before sending your
email, both the "<b>Encrypt This Message</b>" and "<b>Digitally Sign
This Message</b>" options from "<b>Security</b>" are checked (see
Figure 13). You must have already retrieved the recipient's digital
certificate onto your computer (please read the above section entitled
"Retrieving Other People's Digital Certificates" if you haven't done
so), and you will also be prompted to enter the passphrase for your
digital certificate (see Figure 12). After you have done so, the email
will be sent to the recipient encrypted and digitally signed by you! A
digital signature provides some measure of non-repudiation for the
message (assuming that your computer has not been hacked).<br>
      </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="center"> <img style="width: 686px; height: 511px;"
 alt="Encrypted and signed e-mail" src="encryptedAndSigned.png"><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
</body>
</html>
