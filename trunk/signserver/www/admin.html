<div id="content">
			  
			     <h3>Building and deploying</h3>
				 <p>
The sign server is administrated using a cli interface.
<p>
Every signer is identified by a id. The id is the same as specified in the signserver_config.properties.
<p>
It is possible to do configuration while being in production. All configuration commands are cached until a reload command is issued and the configuration becomes active.
<p>
There is a special property file for the cli interface called signserver_cli.properties defining which nodes that exists in the cluster. 
<h4>The properties are</h4>
<ul>
<li>hostname.masternode = Should only contain one of the nodes, specified as the master node. Used by operations dealing with the database and where not all nodes in the cluster needs to be contacted.

<li>hostname.allnodes = Should contain all the nodes in the cluster, separated by a ';'. Used by the commands getStatus, activateSignToken and deactivateSignToken.
</ul>

<h4>The cli lies in bin\signserver.sh/cmd</h4>

<ul>
<li>Get Status Command:
Returns the status of the given signer, it says if it's signtoken is active or not
and the loaded 'active' configuration.

<li>Get Config Command:
Returns the current configuration of signer. Observe that this configuration might not have been activated yet, not until a 'reload' command is issued.

<li>Set Property Command:
Sets a custom property used by the signer or signer token, see reference for the Signer and SignToken for available properties.

<li>Remove Property Command:
Removes a configured property

<li>Upload Certificate Command:
Used when updating the certificate used for signing, sign requests

<li>Upload Certificate Chain Command:
Used when updating the TSA signer when using a Hard Signer Token. Use this one instead of 'Upload Certificate Command' in this case.

<li>Add Authorized Client Command:
Adds a client certificate to a signers list of acceptable clients using this signer. specify
certificate serial number in hex and the IssuerDN of the client certificate.

<li>Removes Authorized Certificate Command:
Removes added client certificates.

<li>List Authorized Clients Commands:
Displays the current list of acceptable clients.

<li>Activate Sign Token Command:
Used to activate hard sign tokens, authentication code is usually the PIN used to unlock the key store on the HSM. Not used if token is set to auto-activation.

<li>Deactivate Sign Token Command:
Brings a Sign Token Off-line. Not used if token is set to auto-activation.

<li>Archive Find from Archive Id Command:
Command used to extract archived data from database identified by the archive Id.
</ul>

The Id depends on the signer, in case of the TSA is the TimeStampInfo serial number used.
The data is stored with the same file name as the archive id in the specified path.
<p>
Archive Find from Request IP Command:
Used to extract all archived data requested from a specified IP address.
<p>
All data is stored as separate files with the archive id as file name in the specified path.
<p>
Archive Find from Request Certificate Command:
Used to extract all archived data requested from a client by specified it's certificates serial number and  issuer DN.
<p>
All data is stored as separate files with the archive id as file name in the specified path.

		</p>
		 					     
  
</div> 
